<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<div th:fragment="area" id="checkin-area">

    <!-- 기록 완료 상태 (체크인 있고, 수정 모드가 아닐 때) -->
    <div th:if="${checkIn != null && !edit}"
         x-data="{ show: false }"
         x-init="setTimeout(() => show = true, 50)"
         x-show="show"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 scale-90"
         x-transition:enter-end="opacity-100 scale-100"
         class="text-center">

        <div th:if="${checkIn.isSober}">
            <div class="w-20 h-20 mx-auto bg-emerald-100 rounded-full flex items-center justify-center mb-4">
                <span class="text-5xl">&#9898;</span>
            </div>
            <p class="text-lg font-semibold text-emerald-600" th:text="${message}">오늘도 건강한 선택!</p>
        </div>

        <div th:unless="${checkIn.isSober}">
            <div class="w-20 h-20 mx-auto bg-orange-100 rounded-full flex items-center justify-center mb-4">
                <span class="text-5xl">&#10060;</span>
            </div>
            <p class="text-lg font-semibold text-gray-600" th:text="${message}">괜찮아요, 내일 다시!</p>
        </div>

        <button
            hx-get="/checkin/today?edit=true"
            hx-target="#checkin-area"
            hx-swap="outerHTML transition:true"
            class="mt-4 text-sm text-gray-400 hover:text-gray-600 transition min-h-[44px] px-4">
            다시 선택하기
        </button>
    </div>

    <!-- 버튼 상태 (체크인 없거나 수정 모드일 때) -->
    <div th:if="${checkIn == null || edit}" class="flex justify-center gap-8">
        <button
            hx-post="/checkin"
            hx-vals='{"isSober": true}'
            hx-target="#checkin-area"
            hx-swap="outerHTML transition:true"
            class="w-24 h-24 rounded-full bg-emerald-100 hover:bg-emerald-200
                   flex flex-col items-center justify-center transition-all duration-150
                   active:scale-95 touch-manipulation min-w-[96px] min-h-[96px]">
            <span class="text-4xl">&#9898;</span>
            <span class="text-xs text-emerald-700 mt-1 font-medium">안 마셨어요</span>
        </button>

        <button
            hx-post="/checkin"
            hx-vals='{"isSober": false}'
            hx-target="#checkin-area"
            hx-swap="outerHTML transition:true"
            class="w-24 h-24 rounded-full bg-gray-100 hover:bg-gray-200
                   flex flex-col items-center justify-center transition-all duration-150
                   active:scale-95 touch-manipulation min-w-[96px] min-h-[96px]">
            <span class="text-4xl">&#10060;</span>
            <span class="text-xs text-gray-600 mt-1 font-medium">마셨어요</span>
        </button>
    </div>

</div>
</html>
